{"version":3,"sources":["empleados.js"],"names":["empleados","id","tabla","document","getElementById","addEventListener","dataContainer","dataset","JSON","parse","length","mostrarEmpleados","input","querySelector","searchTerm","value","toLowerCase","trim","filas","querySelectorAll","forEach","fila","textoFila","textContent","style","display","includes","innerHTML","emp","createElement","nombre","appendChild","eliminarEmpleado","idEmpleado","confirm","fetch","method","headers","body","encodeURIComponent","then","res","json","data","status","filter","alert","msg","err","console","error","guardarCambiosEmpleado","correo","index","findIndex","cerrarModalEditar"],"mappings":";;AAAA,IAAIA,SAAS,GAAG,EAAhB;AACA,IAAIC,EAAE,GAAG,CAAT;AAEA,IAAMC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAd,C,CAEA;;AACAD,QAAQ,CAACE,gBAAT,CAA0B,kBAA1B,EAA8C,YAAY;AAEtD;AACA,MAAMC,aAAa,GAAGH,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAtB;;AAEA,MAAIE,aAAa,IAAIA,aAAa,CAACC,OAAd,CAAsBP,SAA3C,EAAsD;AAClDA,IAAAA,SAAS,GAAGQ,IAAI,CAACC,KAAL,CAAWH,aAAa,CAACC,OAAd,CAAsBP,SAAjC,CAAZ;AACAC,IAAAA,EAAE,GAAGD,SAAS,CAACU,MAAV,GAAmB,CAAnB,GAAuBV,SAAS,CAACA,SAAS,CAACU,MAAV,GAAmB,CAApB,CAAT,CAAgCT,EAAhC,GAAqC,CAA5D,GAAgE,CAArE;AACH;;AAEDU,EAAAA,gBAAgB,GAVsC,CAYtD;;AACA,MAAMC,KAAK,GAAGT,QAAQ,CAACU,aAAT,CAAuB,wBAAvB,CAAd;;AAEA,MAAID,KAAK,IAAIV,KAAb,EAAoB;AAChBU,IAAAA,KAAK,CAACP,gBAAN,CAAuB,OAAvB,EAAgC,YAAY;AACxC,UAAMS,UAAU,GAAG,KAAKC,KAAL,CAAWC,WAAX,GAAyBC,IAAzB,EAAnB;AACA,UAAMC,KAAK,GAAGhB,KAAK,CAACiB,gBAAN,CAAuB,IAAvB,CAAd;AAEAD,MAAAA,KAAK,CAACE,OAAN,CAAc,UAAAC,IAAI,EAAI;AAClB,YAAMC,SAAS,GAAGD,IAAI,CAACE,WAAL,CAAiBP,WAAjB,EAAlB;AACAK,QAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,GAAqBH,SAAS,CAACI,QAAV,CAAmBZ,UAAnB,IAAiC,EAAjC,GAAsC,MAA3D;AACH,OAHD;AAIH,KARD;AASH;AACJ,CA1BD;;AA6BA,SAASH,gBAAT,GAA4B;AACxBT,EAAAA,KAAK,CAACyB,SAAN,GAAkB,EAAlB;AAEA3B,EAAAA,SAAS,CAACoB,OAAV,CAAkB,UAAAQ,GAAG,EAAI;AACrB,QAAMP,IAAI,GAAGlB,QAAQ,CAAC0B,aAAT,CAAuB,IAAvB,CAAb;AAEAR,IAAAA,IAAI,CAACM,SAAL,+BACUC,GAAG,CAAC3B,EADd,oCAEU2B,GAAG,CAACE,MAFd,gHAIiEF,GAAG,CAAC3B,EAJrE;AAgBAC,IAAAA,KAAK,CAAC6B,WAAN,CAAkBV,IAAlB;AACH,GApBD;AAqBH,C,CAKD;AACA;AACA;;;AACA,SAASW,gBAAT,CAA0BC,UAA1B,EAAsC;AAElC,MAAI,CAACC,OAAO,CAAC,4CAAD,CAAZ,EAA4D;AAE5DC,EAAAA,KAAK,CAAC,oCAAD,EAAuC;AACxCC,IAAAA,MAAM,EAAE,MADgC;AAExCC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAF+B;AAGxCC,IAAAA,IAAI,EAAE,QAAQC,kBAAkB,CAACN,UAAD;AAHQ,GAAvC,CAAL,CAKKO,IALL,CAKU,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GALb,EAMKF,IANL,CAMU,UAAAG,IAAI,EAAI;AAEV,QAAIA,IAAI,CAACC,MAAL,KAAgB,SAApB,EAA+B;AAE3B;AACA5C,MAAAA,SAAS,GAAGA,SAAS,CAAC6C,MAAV,CAAiB,UAAAjB,GAAG;AAAA,eAAIA,GAAG,CAAC3B,EAAJ,KAAWgC,UAAf;AAAA,OAApB,CAAZ;AACAtB,MAAAA,gBAAgB;AAEhBmC,MAAAA,KAAK,CAAC,mCAAD,CAAL;AAEH,KARD,MAQO;AACHA,MAAAA,KAAK,CAAC,YAAYH,IAAI,CAACI,GAAlB,CAAL;AACH;AACJ,GAnBL,WAoBW,UAAAC,GAAG,EAAI;AACVF,IAAAA,KAAK,CAAC,oCAAD,CAAL;AACAG,IAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACH,GAvBL;AAwBH,C,CAMD;AACA;AACA;;;AACA,SAASG,sBAAT,GAAkC;AAC9B,MAAMlD,EAAE,GAAGE,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCW,KAA7C;AACA,MAAMe,MAAM,GAAG3B,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCW,KAArD;AACA,MAAMqC,MAAM,GAAGjD,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCW,KAArD;AAEAoB,EAAAA,KAAK,CAAC,kCAAD,EAAqC;AACtCC,IAAAA,MAAM,EAAE,MAD8B;AAEtCC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAF6B;AAGtCC,IAAAA,IAAI,EACA,QAAQC,kBAAkB,CAACtC,EAAD,CAA1B,GACA,UADA,GACasC,kBAAkB,CAACT,MAAD,CAD/B,GAEA,UAFA,GAEaS,kBAAkB,CAACa,MAAD;AANG,GAArC,CAAL,CAQKZ,IARL,CAQU,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GARb,EASKF,IATL,CASU,UAAAG,IAAI,EAAI;AAEV,QAAIA,IAAI,CAACC,MAAL,KAAgB,SAApB,EAA+B;AAC3B,UAAMS,KAAK,GAAGrD,SAAS,CAACsD,SAAV,CAAoB,UAAA1B,GAAG;AAAA,eAAIA,GAAG,CAAC3B,EAAJ,IAAUA,EAAd;AAAA,OAAvB,CAAd;;AACA,UAAIoD,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdrD,QAAAA,SAAS,CAACqD,KAAD,CAAT,CAAiBvB,MAAjB,GAA0BA,MAA1B;AACA9B,QAAAA,SAAS,CAACqD,KAAD,CAAT,CAAiBD,MAAjB,GAA0BA,MAA1B;AACH;;AAEDzC,MAAAA,gBAAgB;AAChB4C,MAAAA,iBAAiB;AAEjBT,MAAAA,KAAK,CAAC,kCAAD,CAAL;AACH,KAXD,MAWO;AACHA,MAAAA,KAAK,CAAC,YAAYH,IAAI,CAACI,GAAlB,CAAL;AACH;AAEJ,GA1BL,WA2BW,UAAAC,GAAG,EAAI;AACVF,IAAAA,KAAK,CAAC,iCAAD,CAAL;AACAG,IAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACH,GA9BL;AA+BH","sourcesContent":["let empleados = [];\r\nlet id = 1;\r\n\r\nconst tabla = document.getElementById(\"tablaEmpleados\");\r\n\r\n// Inicializar cuando el DOM esté listo\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\r\n    // Obtener empleados del atributo data\r\n    const dataContainer = document.getElementById(\"dataContainer\");\r\n\r\n    if (dataContainer && dataContainer.dataset.empleados) {\r\n        empleados = JSON.parse(dataContainer.dataset.empleados);\r\n        id = empleados.length > 0 ? empleados[empleados.length - 1].id + 1 : 1;\r\n    }\r\n\r\n    mostrarEmpleados();\r\n\r\n    // Filtrar tabla de empleados en tiempo real\r\n    const input = document.querySelector('.InputContainer .input');\r\n\r\n    if (input && tabla) {\r\n        input.addEventListener('input', function () {\r\n            const searchTerm = this.value.toLowerCase().trim();\r\n            const filas = tabla.querySelectorAll('tr');\r\n\r\n            filas.forEach(fila => {\r\n                const textoFila = fila.textContent.toLowerCase();\r\n                fila.style.display = textoFila.includes(searchTerm) ? '' : 'none';\r\n            });\r\n        });\r\n    }\r\n});\r\n\r\n\r\nfunction mostrarEmpleados() {\r\n    tabla.innerHTML = \"\";\r\n\r\n    empleados.forEach(emp => {\r\n        const fila = document.createElement(\"tr\");\r\n\r\n        fila.innerHTML = `\r\n            <td>${emp.id}</td>\r\n            <td>${emp.nombre}</td>\r\n            <td>\r\n                <button class=\"btn-eliminar\" onclick=\"eliminarEmpleado(${emp.id})\">\r\n                    <span class=\"btn-eliminar__icon\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" \r\n                        viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                            <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 \r\n                            0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6\"></path>\r\n                        </svg>\r\n                    </span>\r\n                </button>\r\n            </td>\r\n        `;\r\n\r\n        tabla.appendChild(fila);\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n// =============================\r\n//     ELIMINAR EMPLEADO (BD)\r\n// =============================\r\nfunction eliminarEmpleado(idEmpleado) {\r\n\r\n    if (!confirm(\"¿Seguro que deseas eliminar este empleado?\")) return;\r\n\r\n    fetch(\"/Paginas/PHP/eliminar_empleado.php\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body: \"id=\" + encodeURIComponent(idEmpleado)\r\n    })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n\r\n            if (data.status === \"success\") {\r\n\r\n                // Eliminar del arreglo visual\r\n                empleados = empleados.filter(emp => emp.id !== idEmpleado);\r\n                mostrarEmpleados();\r\n\r\n                alert(\"Empleado eliminado correctamente.\");\r\n\r\n            } else {\r\n                alert(\"Error: \" + data.msg);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            alert(\"Error al conectar con el servidor.\");\r\n            console.error(err);\r\n        });\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// =============================\r\n//   GUARDAR EDICIÓN (BD)\r\n// =============================\r\nfunction guardarCambiosEmpleado() {\r\n    const id = document.getElementById(\"editId\").value;\r\n    const nombre = document.getElementById(\"editNombre\").value;\r\n    const correo = document.getElementById(\"editCorreo\").value;\r\n\r\n    fetch(\"/Paginas/PHP/editar_empleado.php\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body:\r\n            \"id=\" + encodeURIComponent(id) +\r\n            \"&nombre=\" + encodeURIComponent(nombre) +\r\n            \"&correo=\" + encodeURIComponent(correo)\r\n    })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n\r\n            if (data.status === \"success\") {\r\n                const index = empleados.findIndex(emp => emp.id == id);\r\n                if (index !== -1) {\r\n                    empleados[index].nombre = nombre;\r\n                    empleados[index].correo = correo;\r\n                }\r\n\r\n                mostrarEmpleados();\r\n                cerrarModalEditar();\r\n\r\n                alert(\"Cambios guardados correctamente.\");\r\n            } else {\r\n                alert(\"Error: \" + data.msg);\r\n            }\r\n\r\n        })\r\n        .catch(err => {\r\n            alert(\"Error al conectar con servidor.\");\r\n            console.error(err);\r\n        });\r\n}\r\n"],"file":"empleados.dev.js"}