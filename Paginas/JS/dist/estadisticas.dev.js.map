{"version":3,"sources":["estadisticas.js"],"names":["ctx","document","getElementById","getContext","colores","grafica","obtenerDatos","periodo","fetch","response","ok","Error","json","datos","console","error","crearGrafica","cliente","find","d","tipo","total","visitante","etiquetas","valores","parseInt","textContent","destroy","Chart","type","data","labels","datasets","backgroundColor","borderWidth","options","cutout","animation","animateScale","animateRotate","duration","plugins","legend","display","tooltip","callbacks","label","context","raw","actualizarGrafica","addEventListener"],"mappings":"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","sourcesContent":["const ctx = document.getElementById('grafica').getContext('2d');\r\nconst colores = ['#a595f9', '#ff5959']; // CLIENTE - VISITANTE\r\nlet grafica;\r\n\r\n// 游댳 Obtener datos del servidor seg칰n el periodo\r\nasync function obtenerDatos(periodo = 'a침o') {\r\n    try {\r\n        const response = await fetch(`../PHP/datos_estadisticas.php?periodo=${periodo}`);\r\n        if (!response.ok) throw new Error(\"Error al obtener datos del servidor\");\r\n        const datos = await response.json();\r\n        return datos;\r\n    } catch (error) {\r\n        console.error(\"Error en obtenerDatos():\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// 游댳 Crear o actualizar la gr치fica\r\nasync function crearGrafica(periodo = 'a침o') {\r\n    const datos = await obtenerDatos(periodo);\r\n\r\n    // Si no hay datos, asignar ceros\r\n    const cliente = datos.find(d => d.tipo === 'CLIENTE') || { total: 0 };\r\n    const visitante = datos.find(d => d.tipo === 'VISITANTE') || { total: 0 };\r\n\r\n    const etiquetas = ['CLIENTE', 'VISITANTE'];\r\n    const valores = [parseInt(cliente.total), parseInt(visitante.total)];\r\n\r\n    // Actualizar texto informativo\r\n    document.getElementById('infoCliente').textContent = `${cliente.total} turnos`;\r\n    document.getElementById('infoVisitante').textContent = `${visitante.total} turnos`;\r\n\r\n    // Destruir la gr치fica anterior (si existe)\r\n    if (grafica) grafica.destroy();\r\n\r\n    // Crear nueva gr치fica\r\n    grafica = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: {\r\n            labels: etiquetas,\r\n            datasets: [{\r\n                data: valores,\r\n                backgroundColor: colores,\r\n                borderWidth: 0\r\n            }]\r\n        },\r\n        options: {\r\n            cutout: '60%',\r\n            animation: {\r\n                animateScale: true,\r\n                animateRotate: true,\r\n                duration: 1000\r\n            },\r\n            plugins: {\r\n                legend: { display: false },\r\n                tooltip: {\r\n                    callbacks: {\r\n                        label: (context) => `${context.label}: ${context.raw} turnos`\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// 游댳 Botones para cambiar el periodo\r\nfunction actualizarGrafica(periodo) {\r\n    crearGrafica(periodo);\r\n}\r\n\r\n// 游댳 Cargar gr치fica inicial (por a침o)\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    crearGrafica();\r\n});\r\n"],"file":"estadisticas.dev.js"}