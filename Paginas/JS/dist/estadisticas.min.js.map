{"version":3,"sources":["estadisticas.js"],"names":["ctx","document","getElementById","getContext","colores","obtenerDatos","periodo","response","datos","_args","arguments","regeneratorRuntime","async","_context","prev","next","length","undefined","awrap","fetch","concat","sent","ok","Error","json","abrupt","t0","console","error","stop","crearGrafica","cliente","visitante","etiquetas","valores","_args2","_context2","find","d","tipo","total","parseInt","textContent","grafica","destroy","Chart","type","data","labels","datasets","borderWidth","options","cutout","animation","animateScale","animateRotate","duration","plugins","display","tooltip","callbacks","label","context","raw"],"mappings":"aAAA,IAAMA,QAAAA,IAAMC,SAASC,eAAe,WAAWC,WAAW,MACpDC,QAAU,CAAC,UAAW,WAC5B,SAEAC,eAFA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,UAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAEAT,EAFA,EAAAG,EAAAO,aAAAC,IAAAR,EAAA,GAAAA,EAAA,GAEA,MAFAI,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAO,MAGAC,MAAA,yCAAAC,OAAAd,KAHA,KAAA,EAAA,IAGeD,EAHfQ,EAAAQ,MAGAC,GAHA,CAAAT,EAAAE,KAAA,EAAA,MAAA,MAGA,IAAAQ,MAAA,uCAHA,KAAA,EAAA,OAAAV,EAAAE,KAAA,EAAAJ,mBAAAO,MAGAX,EAAAiB,QAHA,KAAA,EAAA,OAGAhB,EAHAK,EAAAQ,KAAAR,EAAAY,OAAA,SAGAjB,GAHA,KAAA,GAAA,OAAAK,EAAAC,KAAA,GAAAD,EAAAa,GAAAb,EAAA,MAAA,GAGAc,QAAAC,MAAA,2BAAAf,EAAAa,IAHAb,EAAAY,OAAA,SAGA,IAHA,KAAA,GAAA,IAAA,MAAA,OAAAZ,EAAAgB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,MAGA,SAAAC,eAAA,IAAAxB,EAAAE,EAAAuB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAzB,UAAA,OAAAC,mBAAAC,MAAA,SAAAwB,GAAA,OAAA,OAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,KAAA,EAAA,OAAAT,EAAA,EAAA6B,EAAAnB,aAAAC,IAAAkB,EAAA,GAAAA,EAAA,GAAA,MAAAC,EAAArB,KAAA,EAAAJ,mBAAAO,MAAAb,aAAAC,IAAA,KAAA,EAAAE,EAAA4B,EAAAf,KAEcd,EAFdC,EAAA6B,KAAA,SAAAC,GAAA,MAAA,YAAAA,EAAAC,QAAA,CAAAC,MAAA,GAkBUR,EAAYxB,EAAM6B,KAAK,SAAAC,GAAC,MAAe,cAAXA,EAAEC,QAAyB,CAAEC,MAAO,GAlB1EP,EAAA,CAAA,UAAA,aAAAC,EAAA,CAAAO,SAAAV,EAAAS,OAAAC,SAAAT,EAAAQ,QAAAvC,SAAAC,eAG0C,eAAAwC,YAH1C,GAAAtB,OAG0CW,EAH1CS,MAAA,WAyBIvC,SAASC,eAAe,iBAAiBwC,YAAzC,GAAAtB,OAA0DY,EAAUQ,MAApE,WAzBJG,SAAAA,QAAAC,UAIcpC,QAAAA,IAJdqC,MAAA7C,IAAA,CAAA8C,KAAA,WAiCQC,KAAM,CAjCdC,OAAAf,EAAAgB,SAAA,CAAA,CAAAF,KAAAb,EAOQP,gBAAcvB,QAPtB8C,YAAA,KAAAC,QAAA,CAAAC,OAAA,MAAAC,UAAA,CAAAC,cAAA,EAAAC,eAAA,EAYAC,SAAA,KAoCYC,QAAS,CAnCN3B,OAAf,CAAA4B,SAAA,GAAAC,QAAA,CAAAC,UAAA,CAAAC,MAAA,SAAAC,GAAA,MAAA,GAAA1C,OAAA0C,EAAAD,MAAA,MAAAzC,OAAA0C,EAAAC,IAAA,kBAbA,KAAA,GAAA,IAAA,MAAA,OAAA3B,EAAAP,UAa4BvB,SAAAA,kBAA5BA,GAAAwB,aAAAxB,GACUE,SAAAA,iBADV,mBAAA,WAGIsB","file":"estadisticas.min.js","sourcesContent":["const ctx = document.getElementById('grafica').getContext('2d');\r\nconst colores = ['#a595f9', '#ff5959']; // CLIENTE - VISITANTE\r\nlet grafica;\r\n\r\n// 游댳 Obtener datos del servidor seg칰n el periodo\r\nasync function obtenerDatos(periodo = 'a침o') {\r\n    try {\r\n        const response = await fetch(`../PHP/datos_estadisticas.php?periodo=${periodo}`);\r\n        if (!response.ok) throw new Error(\"Error al obtener datos del servidor\");\r\n        const datos = await response.json();\r\n        return datos;\r\n    } catch (error) {\r\n        console.error(\"Error en obtenerDatos():\", error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// 游댳 Crear o actualizar la gr치fica\r\nasync function crearGrafica(periodo = 'a침o') {\r\n    const datos = await obtenerDatos(periodo);\r\n\r\n    // Si no hay datos, asignar ceros\r\n    const cliente = datos.find(d => d.tipo === 'CLIENTE') || { total: 0 };\r\n    const visitante = datos.find(d => d.tipo === 'VISITANTE') || { total: 0 };\r\n\r\n    const etiquetas = ['CLIENTE', 'VISITANTE'];\r\n    const valores = [parseInt(cliente.total), parseInt(visitante.total)];\r\n\r\n    // Actualizar texto informativo\r\n    document.getElementById('infoCliente').textContent = `${cliente.total} turnos`;\r\n    document.getElementById('infoVisitante').textContent = `${visitante.total} turnos`;\r\n\r\n    // Destruir la gr치fica anterior (si existe)\r\n    if (grafica) grafica.destroy();\r\n\r\n    // Crear nueva gr치fica\r\n    grafica = new Chart(ctx, {\r\n        type: 'doughnut',\r\n        data: {\r\n            labels: etiquetas,\r\n            datasets: [{\r\n                data: valores,\r\n                backgroundColor: colores,\r\n                borderWidth: 0\r\n            }]\r\n        },\r\n        options: {\r\n            cutout: '60%',\r\n            animation: {\r\n                animateScale: true,\r\n                animateRotate: true,\r\n                duration: 1000\r\n            },\r\n            plugins: {\r\n                legend: { display: false },\r\n                tooltip: {\r\n                    callbacks: {\r\n                        label: (context) => `${context.label}: ${context.raw} turnos`\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// 游댳 Botones para cambiar el periodo\r\nfunction actualizarGrafica(periodo) {\r\n    crearGrafica(periodo);\r\n}\r\n\r\n// 游댳 Cargar gr치fica inicial (por a침o)\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    crearGrafica();\r\n});\r\n"]}