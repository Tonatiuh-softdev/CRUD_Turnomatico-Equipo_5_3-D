{"version":3,"sources":["empleados.js"],"names":["empleados","id","tabla","document","getElementById","fila","innerHTML","appendChild","forEach","emp","createElement","concat","eliminarEmpleado","idEmpleado","confirm","fetch","method","headers","guardarCambiosEmpleado","body","correo","res","then","data","status","encodeURIComponent","mostrarEmpleados","alert","msg","err","index","console","value","nombre","Content-Type","json","findIndex","cerrarModalEditar","error","addEventListener","dataContainer","parse","dataset","length","input","querySelector","searchTerm","filas","querySelectorAll","toLowerCase","trim","textContent","textoFila","style","display","includes"],"mappings":"aAAA,IAAIA,UAAY,GACZC,GAAK,EAAHC,MAANC,SAAAC,eAAA,kBAwCQC,SAAKC,mBAgBLJ,MAAMK,UAAYF,GAO1BL,UAAAQ,QAAA,SAAAC,GACA,IAAAJ,EAAAF,SAAAO,cAAA,MAxBQL,EAAKC,UAAL,qBAAAK,OACUF,EAAIR,GADd,2BAAAU,OA0BCC,EAAAA,OA1BD,oGAAAD,OA8BwCF,EAAAR,GA9BxC,ygBAyCwCC,MAAAK,YAAeM,KAYtD,SAvBLD,iBAAAC,GA+BJC,QAAA,+CA/BIC,MAAM,qCAAsC,CACxCC,OAAQ,OAgChBC,QAASC,CAAAA,eAAyB,qCACtBC,KAAGhB,MAASC,mBAAeS,KAE7BO,KAAM,SAAAC,GAAGlB,OAAAA,EAASC,SAElBkB,KAAA,SAAAC,GAEO,YAAAA,EAAAC,QAELxB,UAAQyB,UAAmBxB,OAC3B,SAAAQ,GAAA,OAAAA,EAAagB,KAAAA,IAGXC,mBACAC,MAAAJ,sCAG2Cd,MAAA,UAAJc,EAAAK,OAlDjD,MAmDqB,SAAAC,GACL7B,MAAU8B,sCACV9B,QAAU8B,MAAOV,KAczBW,SAAAA,yBA7BR,IAAA9B,EAAAE,SAAAC,eAAA,UAAA4B,MA+BHC,EAAA9B,SAAAC,eAAA,cAAA4B,MAjCSZ,EAASjB,SAASC,eAAe,cAAc4B,MAErDjB,MAAM,mCAAoC,CACtCC,OAAQ,OACRC,QAAS,CAAEiB,eAAgB,qCAC3Bf,KACI,MAAQM,mBAAmBxB,GAC3B,WAAawB,mBAAmBQ,GAChC,WAAaR,mBAAmBL,KAEnCE,KAAK,SAAAD,GAAG,OAAIA,EAAIc,SAChBb,KAAK,SAAAC,GAEF,GAAoB,YAAhBA,EAAKC,OAAsB,CAC3B,IAAMM,EAAQ9B,UAAUoC,UAAU,SAAA3B,GAAG,OAAIA,EAAIR,IAAMA,KACpC,IAAX6B,IACA9B,UAAU8B,GAAOG,OAASA,EAC1BjC,UAAU8B,GAAOV,OAASA,GAG9BM,mBACAW,oBAEAV,MAAM,yCAENA,MAAM,UAAYJ,EAAKK,OAvBnC,MA2BW,SAAAC,GACHF,MAAM,mCACNI,QAAQO,MAAMT,KApI1B1B,SAASoC,iBAAiB,mBAAoB,WAG1C,IAAMC,EAAgBrC,SAASC,eAAe,iBAG1CJ,GAAiByC,EAAMD,QAAcE,YACnC1C,UAAa2C,KAAVF,MAAAD,EAAiCxC,QAAU2C,WACnD1C,GAAA,EAAAD,UAAA2C,OAAA3C,UAAAA,UAAA2C,OAAA,GAAA1C,GAAA,EAAA,GAEDyB,mBAKA,IAAIkB,EAAS1C,SAAO2C,cAAA,0BAEZD,GAAME,OACNF,EAAMG,iBAAcC,QAAN,WAERxC,IAAAA,EAAQH,KAAQ2B,MAAAiB,cAAAC,OACA7C,MAAK8C,iBAAYF,MADvCzC,QAAA,SAAAH,GAJJ,IAAA+C,EAAA/C,EAAA8C,YAAAF,cASH5C,EAAAgD,MAAAC,QAAAF,EAAAG,SAAAT,GAAA,GAAA","file":"empleados.min.js","sourcesContent":["let empleados = [];\r\nlet id = 1;\r\n\r\nconst tabla = document.getElementById(\"tablaEmpleados\");\r\n\r\n// Inicializar cuando el DOM esté listo\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\r\n    // Obtener empleados del atributo data\r\n    const dataContainer = document.getElementById(\"dataContainer\");\r\n\r\n    if (dataContainer && dataContainer.dataset.empleados) {\r\n        empleados = JSON.parse(dataContainer.dataset.empleados);\r\n        id = empleados.length > 0 ? empleados[empleados.length - 1].id + 1 : 1;\r\n    }\r\n\r\n    mostrarEmpleados();\r\n\r\n    // Filtrar tabla de empleados en tiempo real\r\n    const input = document.querySelector('.InputContainer .input');\r\n\r\n    if (input && tabla) {\r\n        input.addEventListener('input', function () {\r\n            const searchTerm = this.value.toLowerCase().trim();\r\n            const filas = tabla.querySelectorAll('tr');\r\n\r\n            filas.forEach(fila => {\r\n                const textoFila = fila.textContent.toLowerCase();\r\n                fila.style.display = textoFila.includes(searchTerm) ? '' : 'none';\r\n            });\r\n        });\r\n    }\r\n});\r\n\r\n\r\nfunction mostrarEmpleados() {\r\n    tabla.innerHTML = \"\";\r\n\r\n    empleados.forEach(emp => {\r\n        const fila = document.createElement(\"tr\");\r\n\r\n        fila.innerHTML = `\r\n            <td>${emp.id}</td>\r\n            <td>${emp.nombre}</td>\r\n            <td>\r\n                <button class=\"btn-eliminar\" onclick=\"eliminarEmpleado(${emp.id})\">\r\n                    <span class=\"btn-eliminar__icon\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" \r\n                        viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                            <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 \r\n                            0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6\"></path>\r\n                        </svg>\r\n                    </span>\r\n                </button>\r\n            </td>\r\n        `;\r\n\r\n        tabla.appendChild(fila);\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n// =============================\r\n//     ELIMINAR EMPLEADO (BD)\r\n// =============================\r\nfunction eliminarEmpleado(idEmpleado) {\r\n\r\n    if (!confirm(\"¿Seguro que deseas eliminar este empleado?\")) return;\r\n\r\n    fetch(\"/Paginas/PHP/eliminar_empleado.php\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body: \"id=\" + encodeURIComponent(idEmpleado)\r\n    })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n\r\n            if (data.status === \"success\") {\r\n\r\n                // Eliminar del arreglo visual\r\n                empleados = empleados.filter(emp => emp.id !== idEmpleado);\r\n                mostrarEmpleados();\r\n\r\n                alert(\"Empleado eliminado correctamente.\");\r\n\r\n            } else {\r\n                alert(\"Error: \" + data.msg);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            alert(\"Error al conectar con el servidor.\");\r\n            console.error(err);\r\n        });\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// =============================\r\n//   GUARDAR EDICIÓN (BD)\r\n// =============================\r\nfunction guardarCambiosEmpleado() {\r\n    const id = document.getElementById(\"editId\").value;\r\n    const nombre = document.getElementById(\"editNombre\").value;\r\n    const correo = document.getElementById(\"editCorreo\").value;\r\n\r\n    fetch(\"/Paginas/PHP/editar_empleado.php\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body:\r\n            \"id=\" + encodeURIComponent(id) +\r\n            \"&nombre=\" + encodeURIComponent(nombre) +\r\n            \"&correo=\" + encodeURIComponent(correo)\r\n    })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n\r\n            if (data.status === \"success\") {\r\n                const index = empleados.findIndex(emp => emp.id == id);\r\n                if (index !== -1) {\r\n                    empleados[index].nombre = nombre;\r\n                    empleados[index].correo = correo;\r\n                }\r\n\r\n                mostrarEmpleados();\r\n                cerrarModalEditar();\r\n\r\n                alert(\"Cambios guardados correctamente.\");\r\n            } else {\r\n                alert(\"Error: \" + data.msg);\r\n            }\r\n\r\n        })\r\n        .catch(err => {\r\n            alert(\"Error al conectar con servidor.\");\r\n            console.error(err);\r\n        });\r\n}\r\n"]}