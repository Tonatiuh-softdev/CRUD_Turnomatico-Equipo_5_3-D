"use strict";var grafica,ctx=document.getElementById("grafica").getContext("2d"),colores=["#a595f9","#ff5959"];function obtenerDatos(){var e,r,n,a=arguments;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<a.length&&void 0!==a[0]?a[0]:"año",t.prev=1,t.next=4,regeneratorRuntime.awrap(fetch("../PHP/datos_estadisticas.php?periodo=".concat(e)));case 4:if((r=t.sent).ok){t.next=7;break}throw new Error("Error al obtener datos del servidor");case 7:return t.next=9,regeneratorRuntime.awrap(r.json());case 9:return n=t.sent,t.abrupt("return",n);case 13:return t.prev=13,t.t0=t.catch(1),console.error("Error en obtenerDatos():",t.t0),t.abrupt("return",[]);case 17:case"end":return t.stop()}},null,null,[[1,13]])}function crearGrafica(){var e,r,n,a,o,c,i=arguments;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<i.length&&void 0!==i[0]?i[0]:"año",t.next=3,regeneratorRuntime.awrap(obtenerDatos(e));case 3:r=t.sent,n=r.find(function(t){return"CLIENTE"===t.tipo})||{total:0},a=r.find(function(t){return"VISITANTE"===t.tipo})||{total:0},o=["CLIENTE","VISITANTE"],c=[parseInt(n.total),parseInt(a.total)],document.getElementById("infoCliente").textContent="".concat(n.total," turnos"),document.getElementById("infoVisitante").textContent="".concat(a.total," turnos"),grafica&&grafica.destroy(),grafica=new Chart(ctx,{type:"doughnut",data:{labels:o,datasets:[{data:c,backgroundColor:colores,borderWidth:0}]},options:{cutout:"60%",animation:{animateScale:!0,animateRotate:!0,duration:1e3},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(t){return"".concat(t.label,": ").concat(t.raw," turnos")}}}}}});case 12:case"end":return t.stop()}})}function actualizarGrafica(t){crearGrafica(t)}document.addEventListener("DOMContentLoaded",function(){crearGrafica()});
//# sourceMappingURL=estadisticas.min.js.map
